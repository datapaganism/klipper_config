[gcode_macro filament_load]
gcode:
  M117 Filament loading   

  M82                      #set extruder to absolute mode

  G92 E0

  G4 P2000             # wait for two second

  FORCE_MOVE STEPPER=extruder DISTANCE=15 VELOCITY=5 ACCEL=1000  # load filament inside the gears force move needs to be enabled

  M109 S235 T0       # set hotend temperature and wait

  G1 E200 F300        # extrude 200mm

  M400                      # wait for current move to finish

  M104 S0 T0           # set hotend temperature to 0

  G92 E0                  # zero extruder position